{"version":3,"file":"js/760.38e4accd.js","mappings":"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","sources":["webpack://vue-practice-app/./src/views/Auth.vue","webpack://vue-practice-app/./src/use/login-form.js","webpack://vue-practice-app/./src/views/Auth.vue?30a9"],"sourcesContent":["<template>\n  <form class=\"card\" @submit.prevent=\"onSubmit\">\n    <h1>Войти в систему</h1>\n\n    <div :class=\"['form-control', {invalid : eError }]\">\n      <label for=\"email\">Email</label>\n      <input type=\"email\" id=\"email\" v-model=\"email\" @blur=\"eBlur\">\n      <small v-if=\"eError\">{{ eError }}</small>\n    </div>\n\n    <div :class=\"['form-control', {invalid : pError }]\">\n      <label for=\"password\">Password</label>\n      <input type=\"password\" id=\"password\" v-model=\"password\" @blur=\"pBlur\">\n      <small v-if=\"pError\">{{ pError }}</small>\n    </div>\n\n    <button class=\"btn primary\" type=\"submit\" :disabled=\"isSubmitting || isTooManyAttempts\">Войти</button>\n    <button class=\"btn primary\" @click.prevent=\"isHelpOpen = !isHelpOpen\">Подсказка</button>\n    <div class=\"pt-1 text\" v-if=\"isHelpOpen\">\n      <div>Mail: admin1@i.ua</div>\n      <div>Pass: admin1</div>\n    </div>\n    <div class=\"text-danger\" v-if=\"isTooManyAttempts\">Вы слишком часто пытаетесь войти. Попробуйте позже.</div>\n  </form>\n</template>\n\n<script>\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"vuex\";\nimport {error} from \"../utils/error\";\nimport {useLoginForm} from \"../use/login-form\";\nimport {ref} from \"vue\";\n\nexport default {\n\n\n  setup() {\n    const route = useRoute()\n    const store = useStore()\n    const isHelpOpen = ref(false)\n\n    if (route.query.message) {\n      store.dispatch('setMessage', {\n        value: error(route.query.message),\n        type: 'warning'\n      })\n    }\n    return {\n      ...useLoginForm(),\n      isHelpOpen\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import {useField, useForm} from 'vee-validate'\nimport * as yup from 'yup'\nimport {computed, watch} from 'vue'\nimport {useStore} from 'vuex'\nimport {useRouter} from 'vue-router'\n\nexport function useLoginForm() {\n    const store = useStore()\n    const router = useRouter()\n    const {handleSubmit, isSubmitting, submitCount} = useForm()\n\n    const {value: email, errorMessage: eError, handleBlur: eBlur} = useField(\n        'email',\n        yup\n            .string()\n            .trim()\n            .required('Пожалуйста введите email')\n            .email('Необходимо ввести корректный email')\n    )\n\n    const MIN_LENGTH = 6\n\n    const {value: password, errorMessage: pError, handleBlur: pBlur} = useField(\n        'password',\n        yup\n            .string()\n            .trim()\n            .required('Пожалуйста введите пароль')\n            .min(MIN_LENGTH, `Пароль не может быть меньше ${MIN_LENGTH} символов`)\n    )\n\n    const isTooManyAttempts = computed(() => submitCount.value >= 3)\n\n    watch(isTooManyAttempts, val => {\n        if (val) {\n            setTimeout(() => submitCount.value = 0, 1500)\n        }\n    })\n\n    const onSubmit = handleSubmit(async values => {\n        try {\n            await store.dispatch('auth/login', values)\n            router.push('/')\n        } catch (e) {\n        }\n    })\n\n    return {\n        email,\n        password,\n        eError,\n        pError,\n        eBlur,\n        pBlur,\n        onSubmit,\n        isSubmitting,\n        isTooManyAttempts\n    }\n}","import { render } from \"./Auth.vue?vue&type=template&id=2860423c\"\nimport script from \"./Auth.vue?vue&type=script&lang=js\"\nexport * from \"./Auth.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/oleg_timosenko/Documents/Курсы/Vue 3 2021 Владилен Минин/myVue/014_1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","for","class","_hoisted_8","_hoisted_9","_createElementBlock","onSubmit","_ctx","_hoisted_1","_normalizeClass","invalid","_hoisted_2","type","id","$event","onBlur","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","disabled","_hoisted_6","onClick","$setup","_hoisted_10","useLoginForm","store","useStore","router","useRouter","useForm","handleSubmit","isSubmitting","submitCount","useField","yup","trim","required","email","value","eError","errorMessage","eBlur","handleBlur","MIN_LENGTH","min","password","pError","pBlur","isTooManyAttempts","computed","watch","val","setTimeout","values","dispatch","push","setup","route","useRoute","isHelpOpen","ref","query","message","error","__exports__","render"],"sourceRoot":""}